/*! For license information please see index.js.LICENSE.txt */
import $ from"jquery";function _extends(){return _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_extends.apply(this,arguments)}var Util=function(e){var n="transitionend",t={TRANSITION_END:"mmTransitionEnd",triggerTransitionEnd:function(t){e(t).trigger(n)},supportsTransitionEnd:function(){return Boolean(n)}};return e.fn.mmEmulateTransitionEnd=function(n){var i=this,s=!1;return e(this).one(t.TRANSITION_END,(function(){s=!0})),setTimeout((function(){s||t.triggerTransitionEnd(i)}),n),this},e.event.special[t.TRANSITION_END]={bindType:n,delegateType:n,handle:function(n){if(e(n.target).is(this))return n.handleObj.handler.apply(this,arguments)}},t}($),NAME="metisMenu",DATA_KEY="metisMenu",EVENT_KEY="."+DATA_KEY,DATA_API_KEY=".data-api",JQUERY_NO_CONFLICT=$.fn[NAME],TRANSITION_DURATION=350,Default={toggle:!0,preventDefault:!0,triggerElement:"a",parentTrigger:"li",subMenu:"ul"},Event={SHOW:"show"+EVENT_KEY,SHOWN:"shown"+EVENT_KEY,HIDE:"hide"+EVENT_KEY,HIDDEN:"hidden"+EVENT_KEY,CLICK_DATA_API:"click"+EVENT_KEY+DATA_API_KEY},ClassName={METIS:"metismenu",ACTIVE:"mm-active",SHOW:"mm-show",COLLAPSE:"mm-collapse",COLLAPSING:"mm-collapsing",COLLAPSED:"mm-collapsed"},MetisMenu=function(){function e(e,n){this.element=e,this.config=_extends({},Default,{},n),this.transitioning=null,this.init()}var n=e.prototype;return n.init=function(){var e=this,n=this.config,t=$(this.element);t.addClass(ClassName.METIS),t.find(n.parentTrigger+"."+ClassName.ACTIVE).children(n.triggerElement).attr("aria-expanded","true"),t.find(n.parentTrigger+"."+ClassName.ACTIVE).parents(n.parentTrigger).addClass(ClassName.ACTIVE),t.find(n.parentTrigger+"."+ClassName.ACTIVE).parents(n.parentTrigger).children(n.triggerElement).attr("aria-expanded","true"),t.find(n.parentTrigger+"."+ClassName.ACTIVE).has(n.subMenu).children(n.subMenu).addClass(ClassName.COLLAPSE+" "+ClassName.SHOW),t.find(n.parentTrigger).not("."+ClassName.ACTIVE).has(n.subMenu).children(n.subMenu).addClass(ClassName.COLLAPSE),t.find(n.parentTrigger).children(n.triggerElement).on(Event.CLICK_DATA_API,(function(t){var i=$(this);if("true"!==i.attr("aria-disabled")){n.preventDefault&&"#"===i.attr("href")&&t.preventDefault();var s=i.parent(n.parentTrigger),a=s.siblings(n.parentTrigger),r=a.children(n.triggerElement);s.hasClass(ClassName.ACTIVE)?(i.attr("aria-expanded","false"),e.removeActive(s)):(i.attr("aria-expanded","true"),e.setActive(s),n.toggle&&(e.removeActive(a),r.attr("aria-expanded","false"))),n.onTransitionStart&&n.onTransitionStart(t)}}))},n.setActive=function(e){$(e).addClass(ClassName.ACTIVE);var n=$(e).children(this.config.subMenu);n.length>0&&!n.hasClass(ClassName.SHOW)&&this.show(n)},n.removeActive=function(e){$(e).removeClass(ClassName.ACTIVE);var n=$(e).children(this.config.subMenu+"."+ClassName.SHOW);n.length>0&&this.hide(n)},n.show=function(e){var n=this;if(!this.transitioning&&!$(e).hasClass(ClassName.COLLAPSING)){var t=$(e),i=$.Event(Event.SHOW);if(t.trigger(i),!i.isDefaultPrevented()){if(t.parent(this.config.parentTrigger).addClass(ClassName.ACTIVE),this.config.toggle){var s=t.parent(this.config.parentTrigger).siblings().children(this.config.subMenu+"."+ClassName.SHOW);this.hide(s)}t.removeClass(ClassName.COLLAPSE).addClass(ClassName.COLLAPSING).height(0),this.setTransitioning(!0),t.height(e[0].scrollHeight).one(Util.TRANSITION_END,(function(){n.config&&n.element&&(t.removeClass(ClassName.COLLAPSING).addClass(ClassName.COLLAPSE+" "+ClassName.SHOW).height(""),n.setTransitioning(!1),t.trigger(Event.SHOWN))})).mmEmulateTransitionEnd(TRANSITION_DURATION)}}},n.hide=function(e){var n=this;if(!this.transitioning&&$(e).hasClass(ClassName.SHOW)){var t=$(e),i=$.Event(Event.HIDE);if(t.trigger(i),!i.isDefaultPrevented()){t.parent(this.config.parentTrigger).removeClass(ClassName.ACTIVE),t.height(t.height())[0].offsetHeight,t.addClass(ClassName.COLLAPSING).removeClass(ClassName.COLLAPSE).removeClass(ClassName.SHOW),this.setTransitioning(!0);var s=function(){n.config&&n.element&&(n.transitioning&&n.config.onTransitionEnd&&n.config.onTransitionEnd(),n.setTransitioning(!1),t.trigger(Event.HIDDEN),t.removeClass(ClassName.COLLAPSING).addClass(ClassName.COLLAPSE))};0===t.height()||"none"===t.css("display")?s():t.height(0).one(Util.TRANSITION_END,s).mmEmulateTransitionEnd(TRANSITION_DURATION)}}},n.setTransitioning=function(e){this.transitioning=e},n.dispose=function(){$.removeData(this.element,DATA_KEY),$(this.element).find(this.config.parentTrigger).children(this.config.triggerElement).off(Event.CLICK_DATA_API),this.transitioning=null,this.config=null,this.element=null},e.jQueryInterface=function(n){return this.each((function(){var t=$(this),i=t.data(DATA_KEY),s=_extends({},Default,{},t.data(),{},"object"==typeof n&&n?n:{});if(i||(i=new e(this,s),t.data(DATA_KEY,i)),"string"==typeof n){if(void 0===i[n])throw new Error('No method named "'+n+'"');i[n]()}}))},e}();$.fn[NAME]=MetisMenu.jQueryInterface,$.fn[NAME].Constructor=MetisMenu,$.fn[NAME].noConflict=function(){return $.fn[NAME]=JQUERY_NO_CONFLICT,MetisMenu.jQueryInterface};export default MetisMenu;