!function(t){function i(i,o){this.element=i,this.options=t.extend({},n,o),this._defaults=n,this._name=e,this.init()}var e="editable",n={keyboard:!0,dblclick:!0,button:!0,buttonSelector:".edit",maintainWidth:!0,dropdowns:{},edit:function(){},save:function(){},cancel:function(){}};i.prototype={init:function(){this.editing=!1,this.options.dblclick&&t(this.element).css("cursor","pointer").bind("dblclick",this.toggle.bind(this)),this.options.button&&t(this.options.buttonSelector,this.element).bind("click",this.toggle.bind(this))},toggle:function(t){t.preventDefault(),this.editing=!this.editing,this.editing?this.edit():this.save()},edit:function(){var i=this,e={};t("td[data-field]",this.element).each((function(){var n,o=t(this).data("field"),s=t(this).text(),d=t(this).width();if(e[o]=s,t(this).empty(),i.options.maintainWidth&&t(this).width(d),o in i.options.dropdowns){n=t("<select></select>");for(var a=0;a<i.options.dropdowns[o].length;a++)t("<option></option>").text(i.options.dropdowns[o][a]).appendTo(n);n.val(s).data("old-value",s).dblclick(i._captureEvent)}else n=t('<input type="text" />').val(s).data("old-value",s).dblclick(i._captureEvent);n.appendTo(this),i.options.keyboard&&n.keydown(i._captureKey.bind(i))})),this.options.edit.bind(this.element)(e)},save:function(){var i={};t("td[data-field]",this.element).each((function(){var e=t(":input",this).val();i[t(this).data("field")]=e,t(this).empty().text(e)})),this.options.save.bind(this.element)(i)},cancel:function(){var i={};t("td[data-field]",this.element).each((function(){var e=t(":input",this).data("old-value");i[t(this).data("field")]=e,t(this).empty().text(e)})),this.options.cancel.bind(this.element)(i)},_captureEvent:function(t){t.stopPropagation()},_captureKey:function(t){13===t.which?(this.editing=!1,this.save()):27===t.which&&(this.editing=!1,this.cancel())}},t.fn[e]=function(n){return this.each((function(){t.data(this,"plugin_"+e)||t.data(this,"plugin_"+e,new i(this,n))}))}}(jQuery,window,document);